.main-layout {
  display:flex;
  height:calc(100vh - 120px);
  margin-top:120px;
  position:relative;
}

.map-container {
  position:fixed;
  left:0;
  top:120px;
  width:70%;
  height:calc(100vh - 120px);
  z-index:1;
}

#map-controls {
  position:absolute;
  bottom:16px;
  left:16px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:5;
  align-items:flex-start;
}

#map-controls .voronoi-toggle-control {
  background:rgba(255,255,255,0.9);
  border:1px solid rgba(148,163,184,0.35);
  box-shadow:0 12px 24px rgba(15,23,42,0.18);
  border-radius:10px;
  padding:10px 14px;
  display:flex;
  align-items:center;
  gap:10px;
  font-size:0.85rem;
  color:#1f2937;
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
}

#map-controls .voronoi-legend {
  background:rgba(255,255,255,0.92);
  border:1px solid rgba(148,163,184,0.35);
  box-shadow:0 14px 28px rgba(15,23,42,0.22);
  border-radius:10px;
  padding:12px 14px;
  display:flex;
  flex-direction:column;
  gap:8px;
  font-size:0.78rem;
  color:#1f2937;
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
}

#map-controls .voronoi-legend__item {
  display:flex;
  align-items:center;
  gap:8px;
  white-space:nowrap;
}

#map-controls .voronoi-legend__swatch {
  width:16px;
  height:16px;
  border-radius:4px;
  border:1px solid rgba(15,23,42,0.25);
  box-shadow:0 2px 4px rgba(15,23,42,0.18);
}

#map-controls .voronoi-legend__swatch--selected {
  background:#DCFCE7;
  border-color:#15803D;
}

#map-controls .voronoi-legend__swatch--source {
  background:#DBEAFE;
  border-color:#1D4ED8;
}

#map-controls .voronoi-legend__label {
  font-weight:600;
  color:#1f2937;
}

#map-controls .voronoi-toggle-control input[type="checkbox"] {
  width:18px;
  height:18px;
  accent-color:#4a5568;
  cursor:pointer;
}

#map-controls .voronoi-toggle-control label {
  cursor:pointer;
  font-weight:600;
}

#map-controls .voronoi-inspector {
  min-width:240px;
  max-width:320px;
  background:rgba(15,23,42,0.82);
  color:#e2e8f0;
  border-radius:12px;
  border:1px solid rgba(148,163,184,0.35);
  box-shadow:0 20px 45px rgba(15,23,42,0.28);
  padding:14px 16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  font-size:0.84rem;
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
}

#map-controls .voronoi-inspector[hidden] {
  display:none !important;
}

.voronoi-inspector__title {
  font-weight:600;
  font-size:0.9rem;
  color:#f8fafc;
}

.voronoi-inspector__summary {
  display:flex;
  flex-direction:column;
  gap:10px;
}

.voronoi-inspector__summary[hidden] {
  display:none !important;
}

.voronoi-inspector__summary-pill {
  background:linear-gradient(135deg,rgba(15,23,42,0.9),rgba(30,41,59,0.92));
  border:1px solid rgba(148,163,184,0.4);
  border-radius:999px;
  padding:12px 16px;
  box-shadow:0 14px 32px rgba(2,6,23,0.45);
  display:flex;
  flex-direction:column;
  gap:8px;
}

.voronoi-inspector__summary-row {
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}

.voronoi-inspector__summary-label {
  font-size:0.72rem;
  letter-spacing:0.02em;
  text-transform:uppercase;
  color:rgba(226,232,240,0.82);
}

.voronoi-inspector__summary-value {
  font-weight:600;
  color:#f8fafc;
  font-variant-numeric:tabular-nums;
}

.voronoi-inspector__empty {
  margin:0;
  color:rgba(226,232,240,0.85);
  line-height:1.4;
}

.voronoi-inspector__list {
  margin:0;
  padding:0;
  list-style:none;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.voronoi-inspector__item {
  background:rgba(15,23,42,0.45);
  border:1px solid rgba(148,163,184,0.35);
  border-radius:10px;
  padding:8px 10px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.voronoi-inspector__item-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}

.voronoi-inspector__tag {
  font-weight:600;
  color:#f1f5f9;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.voronoi-inspector__value {
  font-variant-numeric:tabular-nums;
  color:rgba(226,232,240,0.85);
  font-size:0.78rem;
}

.voronoi-inspector__meter {
  position:relative;
  height:4px;
  border-radius:999px;
  background:rgba(148,163,184,0.35);
  overflow:hidden;
}

.voronoi-inspector__meter-fill {
  display:block;
  height:100%;
  background:linear-gradient(90deg,#f97316,#facc15);
  border-radius:inherit;
}

#map {
  width:100%;
  height:100%;
  border-radius:0;
}

.content-container {
  margin-left:70%;
  width:30%;
  padding:20px;
  overflow-y:auto;
  background:#f8f9fa;
  height:calc(100vh - 120px);
}

.offers-section {
  background:#fff;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  padding:20px;
  margin-bottom:20px;
}

.filters-panel {
  --filters-surface: rgba(255,255,255,0.94);
  --filters-border: rgba(148,163,184,0.25);
  --filters-shadow: 0 18px 40px rgba(15,23,42,0.08);
  background:var(--filters-surface);
  border-radius:16px;
  border:1px solid var(--filters-border);
  box-shadow:var(--filters-shadow);
  padding:20px 22px;
  margin-bottom:22px;
  display:flex;
  flex-direction:column;
  gap:1.15rem;
  position:sticky;
  top:24px;
  z-index:5;
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
}

@media (min-width:993px){
  .content-container {
    height:auto;
    min-height:calc(100vh - 120px);
    overflow-y:visible;
  }

  .filters-panel {
    position:sticky;
    top:24px;
  }
}

@media (max-width:1366px){
  .main-layout {
    height:auto;
    min-height:calc(100vh - 120px);
  }
  .content-container {
    height:auto;
    overflow-y:visible;
  }
}

.filters-title {
  margin:0;
  font-size:1rem;
  font-weight:700;
  letter-spacing:0.01em;
  color:#1f2937;
}

@supports not ((backdrop-filter: blur(1px))) {
  .filters-panel {
    backdrop-filter:none;
    -webkit-backdrop-filter:none;
  }
}

.filters-row {
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:0.75rem 1rem;
}

.filters-row.sort-row {
  align-items:flex-start;
}

.filters-row.tags-row {
  align-items:flex-start;
}

.tags-area {
  flex:1;
  display:flex;
  flex-direction:column;
  gap:0.65rem;
  min-width:0;
}

.filters-label {
  font-weight:600;
  font-size:0.75rem;
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:#64748b;
  min-width:85px;
}

.sort-buttons {
  display:flex;
  flex-wrap:wrap;
  gap:0.55rem;
}

.sort-chip {
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:0.4rem;
  border:1px solid rgba(148,163,184,0.55);
  background:linear-gradient(135deg,#f8fafc 0%,#edf2f7 100%);
  color:#1f2937;
  padding:0.45rem 1.05rem;
  border-radius:999px;
  font-size:0.85rem;
  font-weight:600;
  cursor:pointer;
  transition:border-color 0.18s ease, box-shadow 0.18s ease, transform 0.18s ease, color 0.18s ease, background 0.18s ease;
  box-shadow:0 1px 0 rgba(148,163,184,0.25), 0 6px 16px rgba(148,163,184,0.15);
}

.sort-chip:hover {
  border-color:#2b6cb0;
  color:#1a365d;
  transform:translateY(-1px);
}

.sort-chip:focus-visible {
  outline:3px solid rgba(56,120,224,0.35);
  outline-offset:2px;
}

.sort-chip[data-active="true"] {
  background:linear-gradient(135deg,#2b6cb0 0%,#2c5282 100%);
  border-color:rgba(43,108,176,0.95);
  color:#fff;
  box-shadow:0 10px 22px rgba(43,108,176,0.28);
}

.sort-chip::after {
  content:'';
  width:0.65rem;
  height:0.65rem;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%231f2937' stroke-width='1.8' stroke-linecap='round'%3E%3Cpath d='M3 7.5l3-3 3 3'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:center;
  transition:transform 0.18s ease, filter 0.18s ease, opacity 0.18s ease;
  opacity:0;
  transform:translateY(-1px) rotate(0deg);
}

.sort-chip[data-active="true"]::after {
  filter:invert(1);
  opacity:1;
}

.sort-chip[data-active="true"][data-direction="asc"]::after {
  transform:translateY(-1px) rotate(0deg);
}

.sort-chip[data-active="true"][data-direction="desc"]::after {
  transform:translateY(-1px) rotate(180deg);
}

.tags-wrapper {
  display:flex;
  flex-direction:column;
  gap:0.75rem;
  flex:1;
}

.tags-preview {
  display:flex;
  flex-wrap:wrap;
  gap:0.5rem;
  align-items:center;
}

.tags-summary {
  display:inline-flex;
  align-items:center;
  padding:0.25rem 0.65rem;
  border-radius:999px;
  background:rgba(148,163,184,0.16);
  color:#475569;
  font-size:0.75rem;
  font-weight:600;
  letter-spacing:0.02em;
  flex-shrink:0;
}

.tags-dropdown {
  display:flex;
  flex-direction:column;
  gap:0.45rem;
  padding:0.75rem;
  border-radius:12px;
  border:1px solid rgba(148,163,184,0.35);
  background:rgba(248,250,252,0.92);
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.55);
  max-height:220px;
  overflow-y:auto;
}

.tag-chip {
  display:inline-flex;
  align-items:center;
  gap:0.35rem;
  border:1px solid rgba(148,163,184,0.45);
  background:#f8fafc;
  color:#1f2937;
  border-radius:999px;
  padding:0.38rem 0.85rem;
  font-size:0.8rem;
  font-weight:600;
  line-height:1.2;
  cursor:pointer;
  transition:background 0.18s ease, color 0.18s ease, border-color 0.18s ease, box-shadow 0.18s ease, transform 0.18s ease;
}

.tag-chip--preview {
  white-space:nowrap;
}

.tag-chip--list {
  width:100%;
  justify-content:flex-start;
  border-radius:12px;
  padding:0.45rem 0.85rem;
  background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);
}

.tag-chip:hover {
  border-color:#2b6cb0;
  color:#1a365d;
  transform:translateY(-1px);
}

.tag-chip:focus-visible {
  outline:3px solid rgba(56,120,224,0.35);
  outline-offset:2px;
}

.tag-chip.is-active {
  background:linear-gradient(135deg,#2563eb 0%,#1d4ed8 100%);
  border-color:rgba(37,99,235,0.9);
  color:#fff;
  box-shadow:0 12px 24px rgba(37,99,235,0.28);
}

.tag-chip.is-active::after {
  content:'\2713';
  font-size:0.75rem;
}

.tag-chip.is-compatible:not(.is-active) {
  border-color:rgba(14,165,233,0.55);
  background:rgba(125,211,252,0.2);
  color:#0c4a6e;
  box-shadow:0 0 0 1px rgba(14,165,233,0.18);
}

.tag-chip.is-compatible:not(.is-active):hover {
  border-color:rgba(14,165,233,0.75);
  background:rgba(56,189,248,0.22);
  color:#0b5aa0;
}

.tag-chip__label {
  white-space:nowrap;
}

.tag-chip__count {
  font-size:0.72rem;
  font-weight:600;
  color:#475569;
}

.tag-chip--list .tag-chip__count {
  color:#1d4ed8;
}

.toggle-tags-btn {
  display:inline-flex;
  align-items:center;
  gap:0.35rem;
  border:1px solid rgba(37,99,235,0.25);
  background:rgba(59,130,246,0.08);
  color:#1d4ed8;
  font-weight:700;
  font-size:0.75rem;
  letter-spacing:0.06em;
  text-transform:uppercase;
  cursor:pointer;
  padding:0.45rem 0.95rem;
  border-radius:999px;
  align-self:flex-start;
  transition:background 0.18s ease, border-color 0.18s ease, color 0.18s ease, transform 0.18s ease;
}

.toggle-tags-btn:hover {
  background:rgba(37,99,235,0.12);
  border-color:rgba(37,99,235,0.45);
  transform:translateY(-1px);
}

.toggle-tags-btn:focus-visible {
  outline:3px solid rgba(56,120,224,0.35);
  outline-offset:2px;
}

.toggle-tags-btn::after {
  content:"";
  width:0.6rem;
  height:0.6rem;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%231d4ed8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:center;
  transition:transform 0.2s ease;
}

.toggle-tags-btn[data-state="expanded"]::after {
  transform:rotate(180deg);
}

.tag-placeholder {
  color:#6b7280;
  font-size:0.85rem;
}

.offers-section .section-title { margin-bottom:1rem; }
.offers-section .section-title h2 { margin-bottom:0.5rem; font-size:1.5rem; }

.offers-list,
.offers-grid {
  display:flex;
  flex-direction:column;
  gap:1rem;
}

.offer-tags {
  margin-top:0.75rem;
  font-size:0.82rem;
  font-weight:600;
  letter-spacing:0.01em;
  color:#1d4ed8;
  line-height:1.5;
  word-break:break-word;
}

.user-dashboard {
  display:flex;
  flex-direction:column;
  height:100%;
  width:100%;
}

.user-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:1.5rem;
  padding-bottom:1rem;
  border-bottom:1px solid #eee;
}

.user-header h2 {
  margin:0;
  font-size:1.5rem;
}

.user-header .mobile-browse-offers {
  display:none;
}

@media (max-width:992px){
  .main-layout {
    flex-direction:column;
    height:auto;
    margin-top:110px;
  }
  .map-container {
    position:relative;
    width:100%;
    height:50vh;
    top:0;
  }
  .content-container {
    margin-left:0;
    width:100%;
    height:auto;
    padding:10px;
  }
  .filters-panel { padding:16px; }
}

@media (max-width:576px){
  .main-layout { margin-top:100px; }
  .map-container { height:40vh; }
  .offers-section { padding:15px; }
  .filters-panel { padding:15px; gap:0.75rem; }
  .filters-row { flex-direction:column; align-items:flex-start; gap:0.6rem; }
  .filters-label { margin-right:0; }
  .sort-buttons { width:100%; }
  .toggle-tags-btn {
    margin-left:0;
    width:100%;
    justify-content:center;
  }
  .user-header { flex-direction:column; gap:1rem; align-items:flex-start; }
  .user-header h2 { font-size:1.3rem; }
  .user-header .mobile-browse-offers,
  .user-header #dashboardAddOffer {
    width:100%;
    justify-content:center;
  }
  .user-header .mobile-browse-offers {
    display:flex;
  }
}

.toast-container {
  position:fixed;
  top:16px;
  right:16px;
  z-index:1400;
  display:flex;
  flex-direction:column;
  gap:10px;
  pointer-events:none;
}

.toast-lite {
  min-width:280px;
  max-width:92vw;
  background:#fff;
  color:#0f172a;
  border-radius:10px;
  box-shadow:0 10px 20px rgba(0,0,0,.12),0 3px 6px rgba(0,0,0,.08);
  padding:12px 14px 12px 12px;
  display:grid;
  grid-template-columns:28px 1fr auto;
  align-items:center;
  gap:10px;
  transform:translateY(-8px);
  opacity:0;
  transition:transform .18s ease, opacity .18s ease;
  pointer-events:auto;
}

.toast-lite.show {
  transform:translateY(0);
  opacity:1;
}

.toast-lite .toast-icon {
  width:28px;
  height:28px;
  border-radius:50%;
  display:grid;
  place-items:center;
  font-size:14px;
  color:#fff;
}

.toast-lite .toast-msg { line-height:1.45; font-size:.95rem; }
.toast-lite .toast-close {
  background:transparent;
  border:0;
  cursor:pointer;
  font-size:18px;
  line-height:1;
  color:#64748b;
  padding:4px;
}
.toast-lite .toast-close:hover { color:#0f172a; }

.toast-success .toast-icon { background:#16a34a; }
.toast-info .toast-icon { background:#1e6fba; }
.toast-warning .toast-icon { background:#f59e0b; }
.toast-error .toast-icon { background:#dc2626; }

@media (max-width:576px){
  .toast-container { top:10px; right:10px; gap:8px; }
  .toast-lite { padding:10px 12px; }
}

.map-info-window { font-size:.95rem; max-width:320px; }
.map-info-window h3 { font-size:1.05rem; margin:0 0 .4rem; text-align:center; }
.map-info-window p { margin:.2rem 0; font-size:.9rem; }
.map-info-window .mini-actions { margin-top:.55rem; display:flex; gap:.5rem; justify-content:center; }
.map-info-window .btn-mini {
  display:inline-block;
  padding:.35rem .6rem;
  border-radius:6px;
  border:0;
  background:var(--primary);
  color:#fff;
  font-size:.8rem;
  cursor:pointer;
  text-decoration:none;
}

/* zmniejszony przycisk zamknięcia w oknie mapy */
.gm-ui-hover-effect {
  transform:scale(.7) !important;
  transform-origin:top right;
  top:4px !important;
  right:4px !important;
}

/* zmniejszenie marginesów w oknie informacji na mapie */
.gm-style-iw-c { padding:8px !important; }


.voronoi-label {
  background:rgba(15,23,42,0.88);
  border:1px solid rgba(148,163,184,0.35);
  border-radius:14px;
  padding:8px 14px;
  font-size:0.82rem;
  line-height:1.25;
  color:#ffffff;
  box-shadow:0 18px 34px rgba(15,23,42,0.25);
  min-width:auto;
  text-align:left;
  font-weight:600;
  white-space:normal;
  pointer-events:none;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  justify-content:flex-start;
  gap:4px;
  transition:transform 120ms ease, box-shadow 160ms ease;
}

.voronoi-label__stack {
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:2px;
  width:100%;
}

.voronoi-label__value {
  color:inherit;
  font-weight:600;
  letter-spacing:0.01em;
}

.voronoi-label__price {
  font-size:0.7rem;
  font-weight:500;
  opacity:0.85;
  letter-spacing:0.015em;
}

.voronoi-label__badge {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:2px 8px;
  border-radius:999px;
  background:rgba(248,250,252,0.16);
  color:#f8fafc;
  font-size:0.62rem;
  font-weight:600;
  letter-spacing:0.08em;
  text-transform:uppercase;
  align-self:flex-start;
}

.voronoi-label[data-fallback="true"] {
  background:rgba(220,38,38,0.88);
  border-color:rgba(248,113,113,0.5);
  box-shadow:0 18px 36px rgba(220,38,38,0.3);
}

.voronoi-label[data-density="compact"] {
  padding:6px 10px;
  font-size:0.74rem;
  gap:3px;
}

.voronoi-label[data-density="compact"] .voronoi-label__price {
  font-size:0.64rem;
}

.voronoi-label[data-density="compact"] .voronoi-label__badge {
  padding:1px 6px;
  font-size:0.56rem;
}

@media (max-width:768px){
  .map-info-window { font-size:.9rem; max-width:400px; }
  .map-info-window h3 { font-size:1rem; white-space:nowrap; text-align:center; }
  .map-info-window p { font-size:.85rem; white-space:nowrap; }
  .map-info-window .mini-actions { flex-wrap:wrap; }
  .gm-ui-hover-effect {
    transform:scale(.7) !important;
    transform-origin:top right;
    top:2px !important;
    right:2px !important;
  }
}

.confirm-modal {
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(15,23,42,0.45);
  z-index:1300;
  padding:16px;
}

.confirm-modal.show { display:flex; }

.confirm-box {
  width:100%;
  max-width:420px;
  background:#fff;
  border-radius:12px;
  box-shadow:var(--shadow-lg);
  padding:20px 20px 16px;
  transform:scale(0.98);
  opacity:0;
  transition:transform .15s ease, opacity .15s ease;
}

.confirm-modal.show .confirm-box {
  transform:scale(1);
  opacity:1;
}

.confirm-title {
  margin:0 0 8px;
  font-size:1.15rem;
  font-weight:700;
  color:var(--darker);
}

.confirm-message {
  margin:0 0 16px;
  color:#475569;
  font-size:.95rem;
  line-height:1.5;
}

.confirm-actions {
  display:flex;
  gap:10px;
  justify-content:flex-end;
}

.confirm-btn {
  border:none;
  border-radius:8px;
  padding:.55rem 1rem;
  font-weight:600;
  cursor:pointer;
  transition:transform .08s ease, box-shadow .08s ease, background .2s ease, color .2s ease;
}

.confirm-btn:hover { transform:translateY(-1px); }

.confirm-cancel {
  background:#eef2f7;
  color:#0f172a;
}

.confirm-cancel:hover { background:#e6ebf3; }

.confirm-yes {
  background:var(--primary);
  color:#fff;
  box-shadow:var(--shadow-sm);
}

.confirm-yes:hover { box-shadow:var(--shadow-md); }
